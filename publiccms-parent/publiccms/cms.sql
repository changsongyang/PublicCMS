create table publiccms.cms_category (id integer not null comment '', site_id smallint not null comment '站点', name varchar(50) not null comment '名称', parent_id integer comment '父分类', type_id varchar(20) comment '分类类型', child_ids text comment '所有子分类', tag_type_ids text comment '标签分类', code varchar(50) not null comment '编码', custom_path bit not null comment '自定义访问路径', template_path varchar(255) comment '模板路径', path varchar(1000) comment '首页路径', only_url bit not null comment '外链', has_static bit not null comment '已经静态化', url varchar(1000) comment '首页地址', custom_content_path bit not null comment '自定义内容访问路径', content_path varchar(1000) comment '内容路径', contain_child bit not null comment '包含子分类内容', page_size integer comment '每页数据条数', allow_contribute bit not null comment '允许投稿', sort integer not null comment '顺序', hidden bit not null comment '隐藏', disabled bit not null comment '是否删除', workflow_id integer comment '审核流程', extend_id integer comment '扩展', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_category_attribute (category_id integer not null comment '分类', title varchar(80) comment '标题', keywords varchar(100) comment '关键词', description varchar(300) comment '描述', data varchar(255) comment '数据JSON', primary key (category_id)) comment='' engine=InnoDB;
create table publiccms.cms_category_model (category_id integer not null comment '分类', model_id varchar(20) not null comment '模型编码', site_id smallint not null comment '站点', custom_content_path bit not null comment '自定义内容访问路径', template_path varchar(200) comment '内容模板路径', content_path varchar(1000) comment '内容路径', primary key (category_id, model_id)) comment='' engine=InnoDB;
create table publiccms.cms_comment (id bigint not null comment '', site_id smallint not null comment '站点', user_id bigint not null comment '用户', reply_id bigint comment '回复评论', reply_user_id bigint comment '回复用户', replies integer not null comment '回复数', scores integer not null comment '分数', content_id bigint not null comment '文章内容', ip varchar(130) not null comment 'IP', check_user_id bigint comment '审核用户', check_date datetime(6) comment '审核日期', update_date datetime(6) comment '更新日期', create_date datetime(6) not null comment '创建日期', status integer not null comment '状态：1、已发布 2、待审核', disabled bit not null comment '已禁用', text text comment '内容', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_content (id bigint not null comment '', site_id smallint not null comment '站点', title varchar(255) not null comment '标题', user_id bigint not null comment '发表用户', dept_id integer comment '所属部门', check_user_id bigint comment '审核用户', category_id integer not null comment '分类', model_id varchar(20) not null comment '模型', parent_id bigint comment '父内容', quote_content_id bigint comment '引用内容(当父内容不为空时为顶级内容)', copied bit not null comment '是否转载', author varchar(50) comment '作者', editor varchar(50) comment '编辑', only_url bit not null comment '外链', has_images bit not null comment '拥有图片列表', has_files bit not null comment '拥有附件列表', has_products bit not null comment '拥有产品列表', has_static bit not null comment '已经静态化', url varchar(1000) comment '地址', description varchar(300) comment '简介', tag_ids text comment '标签', cover varchar(255) comment '封面', childs integer not null comment '子内容数', scores integer not null comment '总分数', score_users integer not null comment '评分人数', score decimal(10,2) not null comment '分数', comments integer not null comment '评论数', clicks integer not null comment '点击数', collections integer not null comment '收藏数', publish_date datetime(6) not null comment '发布日期', expiry_date datetime(6) comment '过期日期', check_date datetime(6) comment '审核日期', update_user_id bigint comment '更新用户', update_date datetime(6) comment '更新日期', create_date datetime(6) not null comment '创建日期', sort integer not null comment '顺序', status integer not null comment '状态：0、草稿 1、已发布 2、待审核', disabled bit not null comment '是否删除', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_content_attribute (content_id bigint not null comment '', source varchar(50) comment '内容来源', source_url varchar(1000) comment '来源地址', data varchar(255) comment '数据JSON', search_text varchar(255) comment '全文索引文本', dictionary_values text comment '数据字典值', files_text text comment '附件文本', min_price decimal(10,2) comment '最低价格', max_price decimal(10,2) comment '最高价格', text varchar(255) comment '内容', word_count integer not null comment '字数', primary key (content_id)) comment='' engine=InnoDB;
create table publiccms.cms_content_file (id bigint not null comment '', content_id bigint not null comment '内容', user_id bigint not null comment '用户', file_path varchar(255) not null comment '文件路径', file_type varchar(20) not null comment '文件类型', file_size bigint comment '文件大小', width integer comment '宽度', height integer comment '高度', clicks integer not null comment '点击数', sort integer not null comment '排序', description varchar(300) comment '描述', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_content_product (id bigint not null comment '', site_id smallint not null comment '站点', content_id bigint not null comment '内容', user_id bigint not null comment '用户', cover varchar(255) comment '封面图', title varchar(100) not null comment '标题', price decimal(10,2) not null comment '价格', min_quantity integer comment '最小购买数量', max_quantity integer comment '最大购买数量', inventory integer not null comment '库存', sales integer not null comment '销量', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_content_related (id bigint not null comment '', content_id bigint not null comment '内容', relation_type varchar(20) comment '关系类型', relation varchar(50) comment '关系', related_content_id bigint comment '推荐内容', user_id bigint not null comment '推荐用户', url varchar(1000) comment '推荐链接地址', title varchar(255) comment '推荐标题', description varchar(300) comment '推荐简介', sort integer not null comment '排序', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_dictionary (id varchar(20) not null comment '', site_id smallint not null comment '站点', name varchar(100) not null comment '名称', child_depth integer not null comment '子级深度', primary key (id, site_id)) comment='' engine=InnoDB;
create table publiccms.cms_dictionary_data (dictionary_id varchar(20) not null comment '字典', site_id smallint not null comment '站点', parent_value varchar(50) comment '父值', value varchar(50) not null comment '值', text varchar(100) not null comment '文字', sort integer not null comment '顺序', primary key (dictionary_id, site_id, value)) comment='' engine=InnoDB;
create table publiccms.cms_dictionary_exclude (dictionary_id varchar(20) not null comment '字典', site_id smallint not null comment '站点', exclude_dictionary_id varchar(20) not null comment '排除的数据字典', primary key (dictionary_id, site_id, exclude_dictionary_id)) comment='' engine=InnoDB;
create table publiccms.cms_dictionary_exclude_value (dictionary_id varchar(20) not null comment '字典', site_id smallint not null comment '站点', exclude_dictionary_id varchar(20) not null comment '排除的数据字典', value varchar(50) not null comment '值', exclude_values text comment '排除的值', primary key (dictionary_id, site_id, exclude_dictionary_id, value)) comment='' engine=InnoDB;
create table publiccms.cms_editor_history (id bigint not null comment '', site_id smallint not null comment '站点', item_type varchar(50) not null comment '数据类型', item_id varchar(100) not null comment '数据id', field_name varchar(50) not null comment '字段名', create_date datetime(6) not null comment '创建日期', user_id bigint not null comment '修改用户', text varchar(255) not null comment '文本', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_place (id bigint not null comment '', site_id smallint not null comment '站点', path varchar(100) not null comment '模板路径', user_id bigint comment '提交用户', check_user_id bigint comment '审核用户', item_type varchar(50) comment '推荐项目类型', item_id bigint comment '推荐项目', title varchar(255) not null comment '标题', url varchar(1000) comment '超链接', description varchar(300) comment '简介', cover varchar(255) comment '封面图', create_date datetime(6) not null comment '创建日期', publish_date datetime(6) not null comment '发布日期', expiry_date datetime(6) comment '过期日期', status integer not null comment '状态：0、草稿 1、已发布 2、待审核 3、已下架', clicks integer not null comment '点击数', max_clicks integer not null comment '最大点击数', disabled bit not null comment '已禁用', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_place_attribute (place_id bigint not null comment '位置', data varchar(255) comment '数据JSON', primary key (place_id)) comment='' engine=InnoDB;
create table publiccms.cms_survey (id bigint not null comment '', site_id smallint not null comment '站点', user_id bigint not null comment '用户', survey_type varchar(20) not null comment '问卷类型', title varchar(100) not null comment '标题', description varchar(300) not null comment '描述', votes integer not null comment '投票数', start_date datetime(6) not null comment '开始日期', end_date datetime(6) comment '结束日期', allow_anonymous bit not null comment '允许匿名', create_date datetime(6) not null comment '创建日期', disabled bit not null comment '是否禁用', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_survey_question (id bigint not null comment '', survey_id bigint not null comment '问卷', title varchar(100) not null comment '标题', score integer comment '分数', question_type varchar(20) not null comment '问题类型', cover varchar(255) not null comment '图片', answer varchar(255) comment '答案', sort integer not null comment '排序', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_survey_question_item (id bigint not null comment '', question_id bigint not null comment '问题', votes integer not null comment '投票数', title varchar(100) not null comment '标题', sort integer not null comment '排序', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_tag (id bigint not null comment '', site_id smallint not null comment '站点', name varchar(50) not null comment '名称', type_id integer comment '分类', search_count integer not null comment '搜索次数', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_tag_type (id integer not null comment '', site_id smallint not null comment '站点', name varchar(50) not null comment '名称', count integer not null comment '标签数', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_user_collection (user_id bigint not null comment '用户', content_id bigint not null comment '内容', create_date datetime(6) not null comment '创建日期', primary key (user_id, content_id)) comment='' engine=InnoDB;
create table publiccms.cms_user_score (user_id bigint not null comment '用户', item_type varchar(50) not null comment '类型', item_id bigint not null comment '项目', score integer not null comment '分数', ip varchar(130) not null comment 'IP', create_date datetime(6) not null comment '创建日期', primary key (user_id, item_type, item_id)) comment='' engine=InnoDB;
create table publiccms.cms_user_survey (user_id bigint not null comment '用户', survey_id bigint not null comment '问卷', site_id smallint not null comment '站点', anonymous bit not null comment '匿名', score integer comment '分数', ip varchar(130) not null comment 'IP', create_date datetime(6) not null comment '创建日期', primary key (user_id, survey_id)) comment='' engine=InnoDB;
create table publiccms.cms_user_survey_question (user_id bigint not null comment '用户', question_id bigint not null comment '问题', site_id smallint not null comment '站点', survey_id bigint not null comment '问卷', answer varchar(255) comment '答案', score integer comment '分数', create_date datetime(6) not null comment '创建日期', primary key (user_id, question_id)) comment='' engine=InnoDB;
create table publiccms.cms_user_vote (vote_id bigint not null comment '投票', user_id bigint not null comment '用户', anonymous bit not null comment '匿名', item_id bigint not null comment '投票选项', ip varchar(130) not null comment 'IP', create_date datetime(6) not null comment '创建日期', primary key (user_id, vote_id)) comment='' engine=InnoDB;
create table publiccms.cms_vote (id bigint not null comment '', site_id smallint not null comment '站点', start_date datetime(6) not null comment '开始日期', end_date datetime(6) comment '结束日期', votes integer not null comment '总票数', title varchar(100) not null comment '标题', description varchar(300) comment '描述', allow_anonymous bit not null comment '允许匿名', create_date datetime(6) not null comment '创建日期', disabled bit not null comment '已禁用', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_vote_item (id bigint not null comment '', vote_id bigint not null comment '投票', title varchar(100) not null comment '标题', votes integer not null comment '票数', sort integer not null comment '顺序', primary key (id)) comment='' engine=InnoDB;
create table publiccms.cms_word (id bigint not null comment '', site_id smallint not null comment '站点', name varchar(100) not null comment '名称', search_count integer not null comment '搜索次数', hidden bit not null comment '隐藏', ip varchar(130) not null comment 'IP', create_date datetime(6) not null comment '创建日期', primary key (id)) comment='' engine=InnoDB;
create table publiccms.log_login (id bigint not null comment '', site_id smallint not null comment '站点', name varchar(50) not null comment '用户名', user_id bigint comment '用户', ip varchar(130) not null comment 'IP', channel varchar(50) not null comment '登录渠道', result bit not null comment '结果', create_date datetime(6) not null comment '创建日期', error_password varchar(255) comment '错误密码', primary key (id)) comment='' engine=InnoDB;
create table publiccms.log_operate (id bigint not null comment '', site_id smallint not null comment '站点', user_id bigint comment '用户', dept_id integer comment '部门', channel varchar(50) not null comment '操作渠道', operate varchar(40) not null comment '操作', ip varchar(130) comment 'IP', create_date datetime(6) not null comment '创建日期', content varchar(255) comment '内容', primary key (id)) comment='' engine=InnoDB;
create table publiccms.log_task (id bigint not null comment '', site_id smallint not null comment '站点', task_id integer not null comment '任务', begintime datetime(6) not null comment '开始时间', endtime datetime(6) comment '结束时间', success bit not null comment '执行成功', result varchar(255) comment '执行结果', primary key (id)) comment='' engine=InnoDB;
create table publiccms.log_upload (id bigint not null comment '', site_id smallint not null comment '站点', user_id bigint not null comment '用户', channel varchar(50) not null comment '操作渠道', original_name varchar(255) comment '原文件名', privatefile bit not null comment '私有文件', file_type varchar(20) not null comment '文件类型', file_size bigint comment '文件大小', width integer comment '宽度', height integer comment '高度', ip varchar(130) comment 'IP', create_date datetime(6) not null comment '创建日期', file_path varchar(500) not null comment '文件路径', primary key (id)) comment='' engine=InnoDB;
create table publiccms.sys_app (id integer not null comment '', site_id smallint not null comment '站点', channel varchar(50) not null comment '渠道', app_key varchar(50) not null comment 'APP key', app_secret varchar(50) not null comment 'APP secret', authorized_apis text comment '授权API', expiry_minutes integer comment '过期时间', primary key (id)) comment='' engine=InnoDB;
create table publiccms.sys_app_client (id bigint not null comment '', site_id smallint not null comment '站点', channel varchar(20) not null comment '渠道', uuid varchar(50) not null comment '唯一标识', user_id bigint comment '绑定用户', client_version varchar(50) comment '版本', last_login_date datetime(6) comment '上次登录时间', last_login_ip varchar(130) comment '上次登录IP', create_date datetime(6) not null comment '创建日期', disabled bit not null comment '是否禁用', primary key (id)) comment='' engine=InnoDB;
create table publiccms.sys_app_token (auth_token varchar(40) not null comment '授权验证', app_id integer not null comment '应用', create_date datetime(6) not null comment '创建日期', expiry_date datetime(6) comment '过期日期', primary key (auth_token)) comment='' engine=InnoDB;
create table publiccms.sys_cluster (uuid varchar(40) not null comment 'uuid', create_date datetime(6) not null comment '创建时间', heartbeat_date datetime(6) not null comment '心跳时间', master bit not null comment '是否管理', cms_version varchar(20) comment '版本', revision varchar(20) comment '修订', primary key (uuid)) comment='' engine=InnoDB;
create table publiccms.sys_config_data (site_id smallint not null comment '站点', code varchar(50) not null comment '配置项编码', data varchar(255) not null comment '值', primary key (site_id, code)) comment='' engine=InnoDB;
create table publiccms.sys_dept (id integer not null comment '', site_id smallint not null comment '站点', name varchar(50) not null comment '名称', code varchar(50) not null comment '编码', parent_id integer comment '父部门', description varchar(300) comment '描述', user_id bigint comment '负责人', max_sort integer not null comment '最大内容置顶级别', owns_all_category bit not null comment '拥有全部分类权限', owns_all_page bit not null comment '拥有全部页面权限', owns_all_config bit not null comment '拥有全部配置权限', primary key (id)) comment='' engine=InnoDB;
create table publiccms.sys_dept_item (dept_id integer not null comment '部门', item_type varchar(50) not null comment '项目类型', item_id varchar(100) not null comment '项目', primary key (dept_id, item_type, item_id)) comment='' engine=InnoDB;
create table publiccms.sys_domain (name varchar(100) not null comment '域名', site_id smallint not null comment '站点', wild bit not null comment '通配域名', multiple bit not null comment '站点群', path varchar(100) comment '路径', primary key (name)) comment='' engine=InnoDB;
create table publiccms.sys_email_token (auth_token varchar(40) not null comment '验证码', user_id bigint not null comment '用户', email varchar(100) not null comment '邮件地址', create_date datetime(6) not null comment '创建日期', expiry_date datetime(6) not null comment '过期日期', primary key (auth_token)) comment='' engine=InnoDB;
create table publiccms.sys_extend (id integer not null comment '', item_type varchar(20) not null comment '扩展类型', item_id integer not null comment '扩展项目', primary key (id)) comment='' engine=InnoDB;
create table publiccms.sys_extend_field (extend_id integer not null comment '扩展', code varchar(20) not null comment '编码', required bit not null comment '是否必填', searchable bit not null comment '是否可搜索', sortable varchar(20) comment '排序字段', maxlength integer comment '最大长度', width integer comment '高度', height integer comment '宽度', name varchar(20) not null comment '名称', description varchar(100) comment '解释', input_type varchar(20) not null comment '表单类型', default_value varchar(50) comment '默认值', dictionary_id varchar(20) comment '数据字典', multiple bit not null comment '多选', sort integer not null comment '顺序', primary key (extend_id, code)) comment='' engine=InnoDB;
create table publiccms.sys_lock (site_id smallint not null comment '站点', item_type varchar(50) not null comment '类型', item_id varchar(130) not null comment '项目', user_id bigint comment '用户', count integer not null comment '锁定次数', create_date datetime(6) not null comment '创建日期', primary key (site_id, item_type, item_id)) comment='' engine=InnoDB;
create table publiccms.sys_module (id varchar(30) not null comment '', url varchar(255) comment '链接地址', authorized_url text comment '授权地址', attached varchar(50) comment '标题附加', parent_id varchar(30) comment '父模块', menu bit not null comment '是否菜单', sort integer not null comment '排序', primary key (id)) comment='' engine=InnoDB;
create table publiccms.sys_module_lang (module_id varchar(30) not null comment '模块', lang varchar(20) not null comment '语言', value varchar(100) comment '值', primary key (module_id, lang)) comment='' engine=InnoDB;
create table publiccms.sys_record (site_id smallint not null comment '站点', code varchar(50) not null comment '记录编码', data varchar(255) not null comment '数据', create_date datetime(6) not null comment '创建日期', update_date datetime(6) comment '更新日期', primary key (site_id, code)) comment='' engine=InnoDB;
create table publiccms.sys_role (id integer not null comment '', site_id smallint not null comment '站点', name varchar(50) not null comment '名称', owns_all_right bit not null comment '拥有全部权限', show_all_module bit not null comment '显示全部模块', primary key (id)) comment='' engine=InnoDB;
create table publiccms.sys_role_authorized (role_id integer not null comment '角色', url varchar(100) not null comment '授权地址', primary key (role_id, url)) comment='' engine=InnoDB;
create table publiccms.sys_role_module (role_id integer not null comment '角色', module_id varchar(30) not null comment '模块', primary key (role_id, module_id)) comment='' engine=InnoDB;
create table publiccms.sys_role_user (role_id integer not null comment '角色', user_id bigint not null comment '用户', primary key (role_id, user_id)) comment='' engine=InnoDB;
create table publiccms.sys_site (id smallint not null comment '', parent_id smallint comment '父站点', directory varchar(50) comment '目录', name varchar(50) not null comment '站点名', use_static bit not null comment '启用静态化', site_path varchar(255) not null comment '站点地址', use_ssi bit not null comment '启用服务器端包含', dynamic_path varchar(255) not null comment '动态站点地址', disabled bit not null comment '禁用', primary key (id)) comment='' engine=InnoDB;
create table publiccms.sys_task (id integer not null comment '', site_id smallint not null comment '站点', name varchar(50) not null comment '名称', status integer not null comment '状态', multi_node bit not null comment '多节点执行', cron_expression varchar(50) not null comment '表达式', description varchar(300) comment '描述', file_path varchar(255) comment '文件路径', update_date datetime(6) comment '更新时间', primary key (id)) comment='' engine=InnoDB;
create table publiccms.sys_user (id bigint not null comment '', site_id smallint not null comment '站点', name varchar(50) not null comment '用户名', password varchar(150) not null comment '混淆码.密码', weak_password bit not null comment '弱密码', nickname varchar(45) not null comment '昵称', cover varchar(255) comment '封面', dept_id integer comment '部门', content_permissions integer not null comment '内容权限(0仅自己,1所有人,2本部门)', roles text comment '角色', email varchar(100) comment '邮箱地址', email_checked bit not null comment '已验证邮箱', superuser bit not null comment '是否管理员', disabled bit not null comment '是否禁用', last_login_date datetime(6) comment '最后登录日期', last_login_ip varchar(130) comment '最后登录ip', login_count integer not null comment '登录次数', registered_date datetime(6) comment '注册日期', primary key (id)) comment='' engine=InnoDB;
create table publiccms.sys_user_token (auth_token varchar(40) not null comment '登录授权', site_id smallint not null comment '站点', user_id bigint not null comment '用户', channel varchar(50) not null comment '渠道', create_date datetime(6) not null comment '创建日期', expiry_date datetime(6) comment '过期日期', login_ip varchar(130) not null comment '登录IP', primary key (auth_token)) comment='' engine=InnoDB;
create table publiccms.trade_account (id bigint not null comment '用户', site_id smallint not null comment '站点', amount decimal(10,2) not null comment '金额', update_date datetime(6) comment '更新日期', primary key (id)) comment='' engine=InnoDB;
create table publiccms.trade_account_history (id bigint not null comment '', site_id smallint not null comment '站点', serial_number varchar(100) not null comment '流水号', account_id bigint not null comment '账户', user_id bigint comment '操作用户', amount_change decimal(10,2) not null comment '变动金额', amount decimal(10,2) not null comment '变动金额', balance decimal(10,2) not null comment '变动金额', status integer not null comment '类型:0预充值,1消费,2充值,3退款', description varchar(255) comment '描述', create_date datetime(6) not null comment '创建日期', primary key (id)) comment='' engine=InnoDB;
create table publiccms.trade_address (id bigint not null comment '', site_id smallint not null comment '站点', user_id bigint not null comment '用户', address varchar(255) comment '地址', addressee varchar(50) comment '收件人', telephone varchar(50) comment '电话', create_date datetime(6) not null comment '创建日期', primary key (id)) comment='' engine=InnoDB;
create table publiccms.trade_order (id bigint not null comment '', site_id smallint not null comment '站点', user_id bigint not null comment '用户', title varchar(255) not null comment '标题', amount decimal(10,2) not null comment '总金额', payment_id bigint comment '支付订单', address varchar(255) comment '地址', addressee varchar(100) comment '收件人', telephone varchar(100) comment '电话', ip varchar(130) not null comment 'IP地址', remark varchar(255) comment '备注', status integer not null comment '状态:0待确认,1无效订单,2已付款,3已退款,4已关闭', confirmed bit not null comment '已确认', processed bit not null comment '已处理', process_user_id bigint comment '处理用户', process_info varchar(255) comment '处理信息', update_date datetime(6) comment '更新日期', create_date datetime(6) not null comment '创建日期', process_date datetime(6) comment '处理日期', payment_date datetime(6) comment '支付日期', primary key (id)) comment='' engine=InnoDB;
create table publiccms.trade_order_history (id bigint not null comment '', site_id smallint not null comment '站点', order_id bigint not null comment '订单', create_date datetime(6) not null comment '创建日期', operate varchar(100) not null comment '操作', content text comment '内容', primary key (id)) comment='' engine=InnoDB;
create table publiccms.trade_order_product (id bigint not null comment '', site_id smallint not null comment '站点', order_id bigint not null comment '用户', content_id bigint not null comment '内容', product_id bigint not null comment '产品', price decimal(10,2) not null comment '价格', quantity integer not null comment '数量', amount decimal(10,2) not null comment '总金额', remark varchar(255) comment '备注', primary key (id)) comment='' engine=InnoDB;
create table publiccms.trade_payment (id bigint not null comment '', site_id smallint not null comment '站点', user_id bigint not null comment '用户', amount decimal(10,2) not null comment '金额', description varchar(255) comment '描述', trade_type varchar(20) not null comment '订单类型', serial_number varchar(100) not null comment '订单流水', account_type varchar(20) not null comment '支付账户类型', account_serial_number varchar(100) comment '支付账号流水', ip varchar(130) not null comment 'IP地址', status integer not null comment '状态:0待支付,1已支付,2待退款,3已退款,4已关闭', processed bit not null comment '已处理', process_user_id bigint comment '处理用户', update_date datetime(6) comment '更新日期', create_date datetime(6) not null comment '创建日期', process_date datetime(6) comment '处理日期', payment_date datetime(6) comment '支付日期', primary key (id)) comment='' engine=InnoDB;
create table publiccms.trade_payment_history (id bigint not null comment '', site_id smallint not null comment '站点', payment_id bigint not null comment '订单', create_date datetime(6) not null comment '创建日期', operate varchar(100) not null comment '操作', content text comment '内容', primary key (id)) comment='' engine=InnoDB;
create table publiccms.trade_refund (id bigint not null comment '', site_id smallint not null comment '站点', payment_id bigint not null comment '订单', user_id bigint not null comment '用户', amount decimal(10,2) not null comment '申请退款金额', reason varchar(255) comment '退款原因', update_date datetime(6) comment '更新日期', refund_user_id bigint comment '退款操作人员', refund_amount decimal(10,2) comment '退款金额', status integer not null comment '状态:0待退款,1已退款,2取消退款,3拒绝退款,4退款失败', reply varchar(255) comment '回复', create_date datetime(6) not null comment '创建日期', processing_date datetime(6) comment '处理日期', primary key (id)) comment='' engine=InnoDB;
create table publiccms.visit_day (site_id smallint not null comment '站点', visit_date date not null comment '日期', visit_hour tinyint not null comment '小时', pv bigint not null comment 'Page Views', uv bigint comment 'User Views', ipviews bigint comment 'IP数', primary key (site_id, visit_date, visit_hour)) comment='' engine=InnoDB;
create table publiccms.visit_history (id bigint not null comment '', site_id smallint not null comment '站点', session_id varchar(50) not null comment '会话', visit_date date not null comment '访问日期', visit_hour tinyint not null comment '访问小时', user_id bigint comment '用户', ip varchar(130) not null comment 'IP', user_agent varchar(500) comment 'User Agent', url varchar(2048) not null comment '访问路径', title varchar(255) comment '标题', screen_width integer comment '屏幕宽度', screen_height integer comment '屏幕高度', referer_url varchar(2048) comment '来源URL', item_type varchar(50) comment '项目类型', item_id varchar(50) comment '项目', create_date datetime(6) not null comment '创建日期', primary key (id)) comment='' engine=InnoDB;
create table publiccms.visit_item (site_id smallint not null comment '站点', visit_date date not null comment '日期', item_type varchar(50) not null comment '项目类型', item_id varchar(50) not null comment '项目', pv bigint not null comment 'Page Views', uv bigint comment 'User Views', ipviews bigint comment 'IP数', primary key (site_id, visit_date, item_type, item_id)) comment='' engine=InnoDB;
create table publiccms.visit_session (site_id smallint not null comment '站点', session_id varchar(50) not null comment '会话', visit_date date not null comment '日期', last_visit_date datetime(6) comment '上次访问日期', first_visit_date datetime(6) comment '首次访问日期', ip varchar(130) not null comment 'IP', pv bigint not null comment 'PV', primary key (site_id, session_id, visit_date)) comment='' engine=InnoDB;
create table publiccms.visit_url (site_id smallint not null comment '站点', visit_date date not null comment '日期', url_md5 varchar(50) not null comment 'URL MD5', url_sha varchar(100) not null comment 'URL SHA', url varchar(2048) not null comment 'URL', pv bigint not null comment 'Page Views', uv bigint comment 'User Views', ipviews bigint comment 'IP数', primary key (site_id, visit_date, url_md5, url_sha)) comment='' engine=InnoDB;
create index cms_category_site_id on publiccms.cms_category (site_id, parent_id, hidden, disabled);
create index cms_category_sort on publiccms.cms_category (sort);
create index cms_category_type_id on publiccms.cms_category (type_id, allow_contribute);
alter table publiccms.cms_category add constraint cms_category_code unique (site_id, code);
create index cms_category_model_site_id on publiccms.cms_category_model (site_id, model_id);
create index cms_comment_reply_id on publiccms.cms_comment (site_id, reply_user_id, reply_id);
create index cms_comment_site_id on publiccms.cms_comment (site_id, content_id, status, disabled);
create index cms_comment_user_id on publiccms.cms_comment (site_id, user_id, status, disabled);
create index cms_content_category_id on publiccms.cms_content (site_id, category_id, parent_id, disabled);
create index cms_content_disabled on publiccms.cms_content (site_id, disabled, category_id, model_id);
create index cms_content_parent_id on publiccms.cms_content (site_id, parent_id, disabled, sort, publish_date);
create index cms_content_quote_content_id on publiccms.cms_content (site_id, quote_content_id);
create index cms_content_status on publiccms.cms_content (site_id, status, parent_id, category_id, disabled, model_id, publish_date, expiry_date, sort);
create index cms_content_file_clicks on publiccms.cms_content_file (clicks);
create index cms_content_file_content_id on publiccms.cms_content_file (content_id, sort);
create index cms_content_file_file_size on publiccms.cms_content_file (file_size);
create index cms_content_file_file_type on publiccms.cms_content_file (file_type);
create index cms_content_product_content_id on publiccms.cms_content_product (site_id, content_id);
create index cms_content_product_inventory on publiccms.cms_content_product (site_id, inventory);
create index cms_content_product_price on publiccms.cms_content_product (site_id, price);
create index cms_content_product_sales on publiccms.cms_content_product (site_id, sales);
create index cms_content_product_user_id on publiccms.cms_content_product (site_id, user_id);
create index cms_content_related_content_id on publiccms.cms_content_related (content_id, relation_type, relation, sort);
create index cms_content_related_related_content_id on publiccms.cms_content_related (related_content_id, relation_type, relation);
create index cms_dictionary_site_id on publiccms.cms_dictionary (site_id);
create index cms_dictionary_parent_value on publiccms.cms_dictionary_data (dictionary_id, site_id, parent_value);
create index cms_dictionary_parent_value on publiccms.cms_dictionary_exclude (dictionary_id, site_id);
create index cms_dictionary_parent_value on publiccms.cms_dictionary_exclude_value (dictionary_id, site_id);
create index cms_editor_history_item_id on publiccms.cms_editor_history (site_id, item_type, item_id, field_name, create_date);
create index cms_place_clicks on publiccms.cms_place (clicks);
create index cms_place_item_type on publiccms.cms_place (item_type, item_id);
create index cms_place_publish_date on publiccms.cms_place (publish_date, create_date, expiry_date);
create index cms_place_site_id on publiccms.cms_place (site_id, path, status, disabled);
create index cms_place_user_id on publiccms.cms_place (user_id, check_user_id);
create index cms_survey_site_id on publiccms.cms_survey (site_id, survey_type, start_date, disabled, create_date);
create index cms_survey_user_id on publiccms.cms_survey (user_id, votes);
create index cms_survey_question_question_type on publiccms.cms_survey_question (survey_id, question_type, sort);
create index cms_survey_question_survey_id on publiccms.cms_survey_question (survey_id, sort);
create index cms_survey_question_item_question_id on publiccms.cms_survey_question_item (question_id, sort);
create index cms_survey_question_item_votes on publiccms.cms_survey_question_item (question_id, votes);
create index cms_tag_site_id on publiccms.cms_tag (site_id, name);
create index cms_tag_type_id on publiccms.cms_tag (type_id);
create index cms_tag_type_site_id on publiccms.cms_tag_type (site_id, name);
create index cms_user_collection_user_id on publiccms.cms_user_collection (user_id, create_date);
create index cms_user_score_item_type on publiccms.cms_user_score (item_type, item_id, create_date);
create index cms_user_score_user_id on publiccms.cms_user_score (user_id, item_type, create_date);
create index cms_user_survey_site_id on publiccms.cms_user_survey (site_id, score, create_date);
create index cms_user_survey_question_site_id on publiccms.cms_user_survey_question (site_id, survey_id, create_date);
create index cms_user_vote_vote_id on publiccms.cms_user_vote (vote_id, ip, create_date);
create index cms_vote_site_id on publiccms.cms_vote (site_id, start_date, disabled);
create index cms_vote_item_vote_id on publiccms.cms_vote_item (vote_id, sort);
create index cms_word_hidden on publiccms.cms_word (site_id, hidden);
alter table publiccms.cms_word add constraint cms_word_name unique (site_id, name);
create index log_login_channel on publiccms.log_login (site_id, channel, create_date);
create index log_login_ip on publiccms.log_login (site_id, ip, create_date);
create index log_login_result on publiccms.log_login (site_id, result, create_date);
create index log_login_user_id on publiccms.log_login (site_id, user_id, create_date);
create index log_operate_channel on publiccms.log_operate (site_id, channel, create_date);
create index log_operate_ip on publiccms.log_operate (site_id, ip, create_date);
create index log_operate_operate on publiccms.log_operate (site_id, operate, create_date);
create index log_operate_user_id on publiccms.log_operate (site_id, user_id, dept_id);
create index log_task_success on publiccms.log_task (site_id, success, begintime);
create index log_task_task_id on publiccms.log_task (site_id, task_id, begintime);
create index log_upload_channel on publiccms.log_upload (site_id, channel, create_date);
create index log_upload_file_type on publiccms.log_upload (site_id, privatefile, file_type, file_size);
create index log_upload_ip on publiccms.log_upload (site_id, ip, create_date);
create index log_upload_user_id on publiccms.log_upload (site_id, user_id, create_date);
create index sys_app_site_id on publiccms.sys_app (site_id);
alter table publiccms.sys_app add constraint UK_c3wced443o0y6ik9g65xl4tfh unique (app_key);
create index sys_app_client_disabled on publiccms.sys_app_client (site_id, disabled, create_date);
create index sys_app_client_user_id on publiccms.sys_app_client (user_id, disabled, create_date);
alter table publiccms.sys_app_client add constraint sys_app_client_site_id unique (site_id, channel, uuid);
create index sys_app_token_app_id on publiccms.sys_app_token (app_id, create_date);
create index sys_app_token_expiry_date on publiccms.sys_app_token (expiry_date);
create index sys_cluster_create_date on publiccms.sys_cluster (create_date);
create index sys_cluster_heartbeat_date on publiccms.sys_cluster (heartbeat_date, master);
create index sys_dept_site_id on publiccms.sys_dept (site_id);
alter table publiccms.sys_dept add constraint sys_dept_code unique (site_id, code);
create index sys_dept_item_item_id on publiccms.sys_dept_item (item_type, item_id);
create index sys_domain_site_id on publiccms.sys_domain (site_id);
create index sys_email_token_expiry_date on publiccms.sys_email_token (expiry_date);
create index sys_email_token_user_id on publiccms.sys_email_token (user_id, create_date);
create index sys_extend_field_input_type on publiccms.sys_extend_field (extend_id, input_type, searchable);
create index sys_extend_field_sort on publiccms.sys_extend_field (sort);
create index sys_lock_item_type on publiccms.sys_lock (site_id, item_type, create_date);
create index sys_module_parent_id on publiccms.sys_module (parent_id, menu);
create index sys_module_sort on publiccms.sys_module (sort);
create index sys_module_lang_lang on publiccms.sys_module_lang (lang);
create index sys_record_site_id on publiccms.sys_record (site_id, create_date);
create index sys_role_site_id on publiccms.sys_role (site_id);
create index sys_role_module_module_id on publiccms.sys_role_module (module_id);
create index sys_role_user_user_id on publiccms.sys_role_user (user_id);
create index sys_site_disabled on publiccms.sys_site (disabled);
alter table publiccms.sys_site add constraint sys_site_parent_id unique (parent_id, directory);
create index sys_task_site_id on publiccms.sys_task (site_id);
create index sys_task_status on publiccms.sys_task (status);
create index sys_task_update_date on publiccms.sys_task (update_date);
create index sys_user_dept_id on publiccms.sys_user (site_id, registered_date, disabled);
create index sys_user_disabled on publiccms.sys_user (site_id, disabled);
create index sys_user_email on publiccms.sys_user (site_id, email, email_checked);
alter table publiccms.sys_user add constraint sys_user_name unique (site_id, name);
create index sys_user_token_expiry_date on publiccms.sys_user_token (expiry_date);
create index sys_user_token_site_id on publiccms.sys_user_token (site_id, user_id, create_date);
create index sys_user_token_user_id on publiccms.sys_user_token (user_id);
create index trade_account_site_id on publiccms.trade_account (site_id, update_date);
create index trade_account_history_create_date on publiccms.trade_account_history (site_id, create_date);
create index trade_account_history_site_id on publiccms.trade_account_history (site_id, account_id, status);
create index trade_order_create_date on publiccms.trade_order (site_id, create_date);
create index trade_order_payment_id on publiccms.trade_order (site_id, payment_id);
create index trade_order_site_id on publiccms.trade_order (site_id, user_id, status);
create index trade_order_history_create_date on publiccms.trade_order_history (site_id, create_date);
create index trade_order_history_site_id on publiccms.trade_order_history (site_id, order_id, operate);
create index trade_order_product_site_id on publiccms.trade_order_product (site_id, order_id);
create index trade_payment_account_type on publiccms.trade_payment (site_id, account_type, account_serial_number);
create index trade_payment_create_date on publiccms.trade_payment (site_id, create_date);
create index trade_payment_site_id on publiccms.trade_payment (site_id, user_id, status);
create index trade_payment_trade_type on publiccms.trade_payment (site_id, trade_type, serial_number);
create index trade_payment_history_create_date on publiccms.trade_payment_history (site_id, create_date);
create index trade_payment_history_site_id on publiccms.trade_payment_history (site_id, payment_id, operate);
create index trade_refund_create_date on publiccms.trade_refund (site_id, create_date);
create index trade_refund_user_id on publiccms.trade_refund (site_id, user_id, status);
create index visit_session_id on publiccms.visit_day (site_id, visit_date);
create index visit_history_create_date on publiccms.visit_history (site_id, create_date, session_id, ip);
create index visit_history_item_type on publiccms.visit_history (site_id, visit_date, item_type);
create index visit_history_user_id on publiccms.visit_history (site_id, create_date, user_id);
create index visit_history_visit_date on publiccms.visit_history (site_id, visit_date, visit_hour);
create index visit_item_session_id on publiccms.visit_item (site_id, visit_date, item_type, item_id, pv);
create index visit_session_visit_date on publiccms.visit_session (site_id, visit_date, session_id, ip, last_visit_date);
create index visit_url_pv on publiccms.visit_url (site_id, visit_date, pv);
